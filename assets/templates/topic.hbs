<div class="container-fluid">
    <div class="row">
        <div class="col-sm-2">

        </div>
        <div class="col-sm-8">

            <header class="topic-header">
                {{#if parsedTitle.title }}
                    <h2>{{ parsedTitle.title }}</h2>
                    <p>{{ parsedTitle.rawTitle }}</p>
                {{ else }}
                    <h2>{{ parsedTitle.rawTitle }}</h2>
                {{/if}}
            </header>

            <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel" data-interval="false">
                <ol class="carousel-indicators">
                    {{#each images as |image|}}
                        {{#if @first }}
                            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                        {{ else }}
                            <li data-target="#carouselExampleIndicators" data-slide-to="{{ @index }}"></li>
                        {{/if}}
                    {{/each}}
                </ol>
                <div class="carousel-inner">
                    {{! TODO: refactor }}
                    {{#each images as |image|}}
                        {{#if @first }}
                            <div class="carousel-item active">
                                {{#if image.original }}
                                    <img class="d-block w-100" src="{{ image.original }}" alt="">
                                {{ else }}
                                    <img class="d-block w-100" src="{{ image.frontUrl }}" alt="">
                                {{/if}}
                            </div>
                        {{ else }}
                            <div class="carousel-item">
                                {{#if image.original }}
                                    <img class="d-block w-100" src="{{ image.original }}" alt="">
                                {{ else }}
                                    <img class="d-block w-100" src="{{ image.frontUrl }}" alt="">
                                {{/if}}
                            </div>
                        {{/if}}
                    {{/each}}

                    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>

        </div>
        <div class="col-sm-2">
            <h5>Options</h5>

            <form action="/api/topics/{{ id }}/reload" method="POST">
                <button type="submit" class="btn btn-info btn-sm btn-outline-primary">Reload</button>
            </form>

            <ul class="nav flex-column">
                <li class="nav-item">
                    <a href="/proxy/topics/{{ id }}" methods="GET" target="_blank">Proxy</a>
                </li>
                <li class="nav-item">
                    <a id="link" href="{{ only_tracker_url }}forum/viewtopic.php?t={{ id }}" target="_blank">Link</a>
                </li>
                {{#if babe_url }}
                <li class="nav-item">
                    <a href="{{ babe_url }}" methods="GET" target="_blank">Profile</a>
                </li>
                {{/if}}
                {{#if babe_url_search }}
                <li class="nav-item">
                    <a href="{{ babe_url_search }}" methods="GET" target="_blank">Profile (search)</a>
                </li>
                {{/if}}
            </ul>

            <br>

            <h5>Info</h5>
            {{#if parsedTitle.quality }}
                <ul class="nav flex-column">
                    <li class="nav-item">{{ parsedTitle.quality }}</li>
                </ul>
            {{ else }}
                <i>no quality</i>
            {{/if}}
            {{#if exCreatedAt }}
                <ul class="nav flex-column">
                    <li class="nav-item">{{ exCreatedAt }}</li>
                </ul>
            {{ else }}
                <i>no ex created at</i>
            {{/if}}
            {{#if size.value }}
                <ul class="nav flex-column">
                    <li class="nav-item">{{ size.value }}</li>
                </ul>
            {{ else }}
                <i>no size</i>
            {{/if}}
            <br>

            {{#if related }}
            <h5>Related</h5>
            <ul class="nav flex-column">
                {{#each related as |related|}}
                    <li class="nav-item">
                        <a href="/topics/{{ related.id }}">{{ related.quality }}</a>
                    </li>
                {{/each}}
            </ul>
            <br>
            {{/if}}

            <h5>Genres</h5>
            <ul class="nav flex-column">
                {{#each genres as |genre|}}
                    <li class="nav-item">
                        <a href="/genres/{{ genre.id }}">{{ genre.title }}</a>
                    </li>
                {{/each}}
            </ul>
            <br>

            <h5>Studios</h5>
            <ul class="nav flex-column">
                {{#each studios as |studio|}}
                    <li class="nav-item">
                        <a href="/studios/{{ studio.id }}">{{ studio.url }}</a>
                        <a href="/api/studios/{{ studio.id }}/ban">
                            <div class="js-ban-studio" title="Ban the studio" style="display: inline-block;">
                                <i class="fas fa-ban"></i>
                            </div>
                        </a>
                    </li>
                {{/each}}
            </ul>
        </div>
    </div>
</div>
