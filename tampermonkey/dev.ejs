// ==UserScript==
// @name         <%- appName %> Dev
// @description  no description
// @author       Who knows
// @version      0.11
<% if (backendUrl) { -%>
// @updateURL    <%- backendUrl %>/<%- filename %>
// @downloadURL  <%- backendUrl %>/<%- filename %>
<% } -%>
// @match        <%- trackerUrl %>/forum/*
<% if (base64Icon) { -%>
// @icon         <%- base64Icon %>
<% } -%>
// @connect      localhost
// @connect      babepedia.com
// @connect      fastpic.org
// @connect      imagebam.com
// @connect      imagevenue.com
// @connect      imgbox.com
// @connect      turboimagehost.com
// @connect      *
// @grant        GM_xmlhttpRequest
// @grant        GM.xmlHttpRequest
// @grant        unsafeWindow
// @run-at       document-end
// ==/UserScript==

(async function () {
  'use strict'
  const jsUrl = '<%- backendUrl %>/index.js'

  function log(...args) {
    console.log('[<%- appName %>]', ...args)
  }

  async function addJs() {
    const response = await window.GM.xmlHttpRequest({ url: jsUrl }).catch((e) => log(e))
    if (!response) {
      return
    }
    const js = response.responseText
    eval(js)
  }

  await addJs()
})()
